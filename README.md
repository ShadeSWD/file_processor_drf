# Загрузка и обработка файлов

``Django REST API``, который позволяет загружать файлы на сервер, а затем асинхронно обрабатывать их с использованием ``Celery``.

**Основные задачи:**

- [x] Модель ``file``
- [x] Сериализатор модели ``file``
- [x] Эндпоинт ``upload/`` для загрузки файлов
- [ ] ``Celery`` задача для обработки файла
- [x] Эндпоинт ``files/`` для получения данных загруженных файлов

**Задачи "CI/CD":**

- [ ] Тесты
- [ ] docker
- [x] Базовый CI/CD

**Запуск проекта:**

* Склонируйте репозиторий:
    ```bash
    git clone https://github.com/ShadeSWD/file_processor_drf.git
    ```
* Установите пакетный менеджер poetry:
    ```bash
    pip install poetry
    ```
* Создайте базу данных в ``PostgreSQL`` и заполните файл ``.env``, воспользовавшись ``.env.sample``
* Перейдите в папку с проектом и настройте виртуальное окружение
    ```bash
    poetry install
    ```
* Войдите в виртуальное окружение
    ```bash
    poetry shell
    ```
* Накатите миграции:
  ```bash
  manage.py migrate
  ```
* Создайте суперпользователя:
  ```bash
  manage.py createsuperuser
  ```
* Запустите сервер:
    ```bash
    manage.py runserver
    ```
* Перед первым коммитом необходимо выполнить
  ```bash
  pre-commit install
  ```
  для автоматического выполнения проверок перед коммитами

## Основные задачи

### Эндпоинт для загрузки файлов

Эндпоинт ``upload/``, принимает POST-запросы для загрузки файлов. При загрузке файла создаётся объект модели File, и файл сохраняется на сервере. В ответ на успешную загрузку файла вернуть статус 201 и сериализованные данные файла.

Пример ответа:
```
{
  "pk": 7,
  "upload_at": "2024-02-11T22:51:23.537462Z",
  "processed": false,
  "processed_at": null
}
```

### Эндпоинт для получения данных обо всех загруженных файлах

Эндпоинт ``files/``, принимает пустой GET-запрос и возвращает список всех файлов с их данными.
